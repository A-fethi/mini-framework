<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Framework Test</title>
  <style>
    nav a { margin-right: 1em; }
    .todos { margin-top: 1em; }
    ul { padding-left: 1.2em; }
    li { margin-bottom: 0.5em; }
  </style>
</head>
<body>
  <nav>
    <a href="#/">Home</a>
    <a href="#/todos">Todos</a>
  </nav>
  <div id="app"></div>

  <script type="module">
    import { Vnode, startRouter, createState } from './framework.js';

    // --- Home view ---
    function Home() {
      return Vnode('div', {}, [
        Vnode('h1', {}, 'Home'),
        Vnode('p', {}, 'Welcome to the mini-framework demo!')
      ]);
    }

    // --- Todos view ---
    const [getTodos, setTodos] = createState([]);
    const [getNew, setNew] = createState('');

    function Todos() {
      return Vnode('div', { className: 'todos' }, [
        Vnode('h2', {}, 'Todo List'),
        Vnode('input', {
          type: 'text',
          value: getNew(),
          onInput: e => setNew(e.target.value),
          placeholder: 'Enter new todoâ€¦'
        }),
        Vnode('button', {
          onClick: () => {
            const text = getNew().trim();
            if (!text) return;
            setTodos([...getTodos(), { id: Date.now(), text }]);
            setNew('');
          }
        }, 'Add Todo'),
        Vnode('ul', {},
          getTodos().map(todo =>
            Vnode('li', { key: todo.id }, [
              Vnode('span', {}, todo.text),
              Vnode('button', {
                onClick: () =>
                  setTodos(getTodos().filter(t => t.id !== todo.id))
              }, 'Remove')
            ])
          )
        )
      ]);
    }

    // --- Route setup ---
    const routes = {
      '/': Home,
      '/todos': Todos
    };

    startRouter(routes, document.getElementById('app'));
  </script>
</body>
</html>